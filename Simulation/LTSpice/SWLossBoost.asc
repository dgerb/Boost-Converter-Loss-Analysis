Version 4
SHEET 1 1212 680
WIRE 800 -64 768 -64
WIRE 832 -64 800 -64
WIRE 768 -32 768 -64
WIRE 640 -16 608 -16
WIRE 656 -16 640 -16
WIRE 608 16 608 -16
WIRE 384 208 240 208
WIRE 576 208 464 208
WIRE 624 208 576 208
WIRE 704 208 624 208
WIRE 800 208 768 208
WIRE 880 208 800 208
WIRE 800 320 800 208
WIRE 880 320 880 208
WIRE 240 352 240 208
WIRE 624 352 624 208
WIRE 464 432 400 432
WIRE 576 432 544 432
WIRE 240 528 240 432
WIRE 400 528 400 512
WIRE 400 528 240 528
WIRE 624 528 624 448
WIRE 624 528 400 528
WIRE 800 528 800 384
WIRE 800 528 624 528
WIRE 880 528 880 400
WIRE 880 528 800 528
WIRE 400 544 400 528
FLAG 400 544 0
FLAG 880 208 Vo
FLAG 576 208 Vq
FLAG 608 96 0
FLAG 640 -16 Energy
FLAG 768 48 0
FLAG 800 -64 Power
SYMBOL voltage 240 336 R0
SYMATTR InstName V1
SYMATTR Value 170
SYMBOL nmos 576 352 R0
SYMATTR InstName M1
SYMATTR Value STP8NM60
SYMBOL res 560 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4.7
SYMBOL voltage 400 416 R0
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 5u .01u .01u 10u 20u 1e4)
SYMBOL ind 368 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL diode 704 224 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 864 304 R0
SYMATTR InstName R1
SYMATTR Value 144.5
SYMBOL cap 784 320 R0
SYMATTR InstName C1
SYMATTR Value 1m
SYMBOL bv 608 0 R0
SYMATTR InstName B1
SYMATTR Value V=idt(V(Vq)*Id(M1))
SYMBOL bv 768 -48 R0
SYMATTR InstName B2
SYMATTR Value V=ddt(V(Energy))
TEXT 264 120 Left 2 !.tran 1n 30m
TEXT 264 88 Left 2 !.ic V(Vo)=340
TEXT 200 -144 Left 2 !.meas tran Average avg(v(Power)) TRIG time VAL=18m TARG time VAL=30m
